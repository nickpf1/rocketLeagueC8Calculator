<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<link rel="stylesheet" type="text/css" href="../css/mainPage.css"></link>

<body>

	<div ng-app="myApp" ng-controller="cratesCtrl">

		<table>
			<tr>
				<th>Crate</th>
				<th>Crates for .1X</th>
				<th>Value per crate</th>
				<th>Player amount</th>
				<th>Player total</th>
			</tr>
			<tr ng-repeat="y in crates | orderBy:'amount4Point1'">
				<td>{{y.name}}</td>
				<td>{{y.amount4Point1}}</td>
				<td>{{.1/y.amount4Point1}}</td>
				<td><input type="number" ng-model="y.playerAmount"/></td>
				<td>{{y.playerAmount * (.1/y.amount4Point1)}}</td>
			</tr>
			<tr>
				<td>Total</td>
				<td/>
				<td/>
				<td>{{totalPlayerCrates()}}</td>
				<td>{{totalValue()}}</td>
			</tr>
		</table>

	</div>

	<script>
		angular.module('myApp', []).controller('cratesCtrl', function($scope)
		{
			$scope.totalValue = function()
			{
				var total = 0;
				for(var i = 0; i < this.crates.length; i++)
				{
					total += this.crates[i].playerAmount * (.1/this.crates[i].amount4Point1);
				}
				return total;
			};
			$scope.totalPlayerCrates = function()
			{
				var total = 0;
				for(var i = 0; i < this.crates.length; i++)
				{
					total += this.crates[i].playerAmount;
				}
				return total;
			};
			$scope.crates =
			[
				{
					name: 'Champion 4',
					amount4Point1: 3,
					playerAmount:0
				},
				{
					name: '	Players Choice',
					amount4Point1: 4,
					playerAmount:0
				},
				{
					name: '	Nitro',
					amount4Point1: 8,
					playerAmount:0
				},
				{
					name: '	Champion 1',
					amount4Point1: 10,
					playerAmount:0
				},
				{
					name: 'Champion 3',
					amount4Point1: 10,
					playerAmount:0
				},
				{
					name: '	Champion 2',
					amount4Point1: 11,
					playerAmount:0
				},
				{
					name: 'Velocity Crate',
					amount4Point1: 11,
					playerAmount:0
				},
				{
					name: 'Accelerator',
					amount4Point1: 13,
					playerAmount:0
				},
				{
					name: '	Turbo',
					amount4Point1: 14,
					playerAmount:0
				},
				{
					name: '	Overdrive',
					amount4Point1: 25,
					playerAmount:0
				}];
		});
	</script>

</body>

</html>
